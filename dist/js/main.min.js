function layout(){var e=$(window),t=e.height(),i=e.width(),n=$("#main-content header"),s=$("#main-content aside"),o=$("#main-content article"),a=s.find(".scroll").siblings("footer"),l=a.height();o.width(i-s.outerWidth()),s.add(o).height(t-n.height()),s.find(".scroll").height(s.height()-l),o.find(".scroll").each(function(){var e=$(this),t=e.siblings(".scroll-head"),i=e.siblings("footer");t.length&&i.length?e.height(o.height()-t.height()-i.height()):t.length&&!i.length?e.height(o.height()-t.height()):!t.length&&i.length?e.height(o.height()-i.height()):e.height(o.height())})}function scroll(){var e=$(".scroll");e.length>0&&e.each(function(){var e=$(this),t="";(""==!e.data("scroll")||"undefined"==!e.data("scroll"))&&(t=e.data("scroll")),initScroll(e,t)})}function initScroll(e,t){var i=e,n=$.extend({},{cursorcolor:"#CCE3F5",cursorwidth:"5px",cursorborderradius:"5px",autohidemode:!1,background:"",horizrailenabled:!1,cursorborder:"1px solid #fff",railoffset:!1,cursorborderradius:"5px",railpadding:{right:0}},t);i.niceScroll(n),i.getNiceScroll().resize()}function leftRowHeight(){var e=$("#main-content > aside"),t=e.find(".list > li"),i=t.length,n=0;if(e.length>0)for(n;i>n;n++)t.eq(n).children("span").css("top",-(n+1)+"px")}function modalMiddle(){var e=$(window).height(),t=$(".modal.in > .modal-dialog");marginTop=e-t.height()>0?(e-t.height())/2:0,t.removeAttr("style").css("top",marginTop+"px")}function modalConfirm(e){var t=$(".modal.in");t.find(".confirm").on("click",function(i){var n=e();1==n&&t.modal("hide"),i.stopPropagation()})}function message(e){var t='<div class="modal fade message" tabindex="-1">  <div class="modal-dialog">     <div class="modal-content">        <div class="message">'+e+"</div>     </div>  </div></div>";$("#main-content").append(t),$(".modal.message").modal("show").on("hidden.bs.modal",function(){$("#main-content > .modal.message").remove()}),modalMiddle(),setTimeout(function(){$(".modal.message").modal("hide")},2e3)}function confirm(e){var t='<div class="modal fade confirm" tabindex="-1">  <div class="modal-dialog">     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>     <div class="modal-content">        <div class="message">'+e+'</div>        <div class="btn-group">            <button type="button" class="btn btn-primary confirm">确认</button>            <button type="button" class="btn btn-grey cancel" data-dismiss="modal">取消</button>        </div>     </div>  </div></div>';$("#main-content").append(t),$(".modal.confirm").modal("show").on("hidden.bs.modal",function(){$("#main-content > .modal.confirm").remove()}),modalMiddle()}function leftListChild(){var e=$("#main-content > aside"),t=e.find(".list > li"),i=e.children(".list-children");t.each(function(){var e=$(this),t=e.attr("class"),n=e.offset().top-40;i.find("."+t).css("top",n+"px")})}function tableCell(){var e=$(".tbody.scroll");if(e.length>0)for(var t=$(".thead th"),i=e.find("tr:first-child td"),n=0;n<t.length;n++)t.eq(n).width(i.eq(n).width())}function mailNote(){var e=$(".table span.note");e.children("span:first-child").css("width",""),e.each(function(){var e=$(this),t=e.children("span:first-child");t.outerWidth()>e.outerWidth()-e.children("span:last-child").width()-19&&t.css("width",e.outerWidth()-e.children("span:last-child").width()-20)})}function selection(){$(document).on("click",".selection > .selected, .selection > .am-icon-caret-down",function(){var e=$(this),t=(e.hasClass(".selected")?e:e.closest(".selection").children(".selected"),e.closest(".selection").children(".options"));t.hasClass("in")?(t.removeClass("in"),e.closest(".selection").siblings().children(".options").removeClass("in")):t.addClass("in")}).on("click",".selection > .options > li",function(e){var t=$(this);t.hasClass("more")||(t.parent(".options").siblings(".selected").text($(this).text()),t.parent(".options").removeClass("in")),e.stopPropagation()}).on("click",function(e){$(e.target).closest(".selection").length||$(".selection > .options").removeClass("in")})}function hover(e){var t=e,i=t.closest("div").find(".popover");t.children(".popover").length>0?t.hover(function(){i.toggleClass("in")}):t.add(i).hoverDelay({hoverDuring:10,outDuring:50,hoverEvent:function(){listHover=!0,i.hasClass("in")||i.addClass("in")},outEvent:function(){listHover=!1,listHover||i.removeClass("in")}})}function showHeader(){var e=$("header .count > ul");e.length>1?(e.eq(0).addClass("hidden"),e.eq(1).removeClass("hidden")):e.removeClass("hidden")}function hideHeader(){var e=$("header .count > ul");e.length>1?(e.eq(0).removeClass("hidden"),e.eq(1).addClass("hidden")):e.addClass("hidden")}function hideTips(){var e=$(".tooltips");e.is(":visible")&&setTimeout(function(){e.tooltip("destroy")},2e3)}function checkAll(){var e=$("#main-content > article .check-all input[type='checkbox']"),t=e.closest("div").find(".popover"),i=$(".tbody .am-checkbox"),n=i.children("input[type='checkbox']"),s=t.children("li:first-child");$("header .count > ul"),$("header .title");e.each(function(){var i=$(this);i.click(function(){i.is(":checked")?(s.addClass("active"),i.val(s.html()),showHeader(),n.uCheck("check"),e.uCheck("check")):(t.children("li").removeClass("active"),i.val(""),hideHeader(),n.uCheck("uncheck"),e.uCheck("uncheck"))})}),t.each(function(){var t=$(this),i=t.children("li"),s=t.parents("footer").length>0?t.parents("footer").siblings("div").find(".popover"):t.parent("div").siblings("footer").find(".popover");i.each(function(){var t=$(this);t.click(function(){var i=s.children("li").eq(t.index());2!==t.index()?(t.addClass("active").siblings().removeClass("active"),i.addClass("active").siblings().removeClass("active"),showHeader(),e.uCheck("check").val(t.html()),n.uCheck("check")):(t.siblings().removeClass("active"),i.siblings().removeClass("active"),hideHeader(),e.uCheck("uncheck").val(""),n.uCheck("uncheck"))})})})}function CompareTime(e,t){var i=e.find("input:text.time"),n=e.parent(),s=n.find("tr").index(e)>0?"top":"bottom",o=$.trim(i.eq(0).val()),a=$.trim(i.eq(1).val());if("undefined"==typeof t){if(""==o)return i.eq(0).tooltip({title:"请输入开始时间,如:09:00",placement:"bottom"}).tooltip("show"),hideTips(),!1;if(!checkTime(o))return i.eq(0).tooltip({title:"开始时间格式不正确",placement:"bottom"}).tooltip("show"),hideTips(),!1;if(""==a)return i.eq(1).tooltip({title:"请输入结束时间,如:09:00",placement:"bottom"}).tooltip("show"),hideTips(),!1;if(!checkTime(a))return i.eq(1).tooltip({title:"结束时间格式不正确",placement:"bottom"}).tooltip("show"),hideTips(),!1;var l=new Date((new Date).Format("yyyy/MM/dd")+" "+o),c=new Date((new Date).Format("yyyy/MM/dd")+" "+a);if(l>c)return i.eq(0).tooltip({title:"开始时间不能小于或等于结束时间",placement:s}).tooltip("show"),hideTips(),!1}else if(checkTime(o)&&checkTime(a)){var l=new Date((new Date).Format("yyyy/MM/dd")+" "+o),c=new Date((new Date).Format("yyyy/MM/dd")+" "+a);if(l>=c)return 0==t?i.eq(0).tooltip({title:"开始时间不能大于或等于结束时间",placement:"bottom"}).tooltip("show"):i.eq(1).tooltip({title:"结束时间不能小于或等于开始时间",placement:"bottom"}).tooltip("show"),hideTips(),!1}return!0}function CompareTimeAll(e){if("undefined"!=typeof e){var t=e.find("input:text.time"),n=e.parent(),s=(n.find("tr").index(e)>0?"top":"bottom",$.trim(t.eq(0).val())),o=$.trim(t.eq(1).val());if(r=!1,""==s?(t.eq(0).tooltip({title:"请输入开始时间,如:09:00",placement:"bottom"}).tooltip("show"),hideTips(),r=!0):checkTime(s)||(t.eq(0).tooltip({title:"开始时间格式不正确",placement:"bottom"}).tooltip("show"),hideTips(),r=!0),""==o?(t.eq(1).tooltip({title:"请输入结束时间,如:09:00",placement:"bottom"}).tooltip("show"),hideTips(),r=!0):checkTime(o)||(t.eq(1).tooltip({title:"结束时间格式不正确",placement:"bottom"}).tooltip("show"),hideTips(),r=!0),r)return!1;var a=new Date((new Date).Format("yyyy/MM/dd")+" "+s),l=new Date((new Date).Format("yyyy/MM/dd")+" "+o);if(a>l)return t.eq(0).tooltip({title:"开始时间不能小于或等于结束时间",placement:"bottom"}).tooltip("show"),hideTips(),!1}else{var c=$("#main-content div.popwindow div.select-time table.table tbody tr:not(:last)"),d=c.length,r=!1;if(0==d)return $("#main-content div.popwindow div.select-time table.table tbody tr:first").tooltip({title:"请添加推广时间",placement:"bottom"}).tooltip("show"),hideTips(),!1;for(i=0;i<d;i++)CompareTimeAll(c.eq(i))||(r=!0);if(r)return!1;var h=new Array,r=!1;for(i=0;i<d;i++){for(var m=new Array,p=c.eq(i).find("input:text.time"),v=ReturnTimeInt(p.eq(0)),u=ReturnTimeInt(p.eq(1)),f=h.length,g=0;f>g;g++){var b=h[g][0],C=h[g][1];v>b&&C>v&&(p.eq(0).tooltip({title:"开始时间不允许与其他时间段交叉",placement:"bottom"}).tooltip("show"),r=!0),u>b&&C>u&&(p.eq(1).tooltip({title:"结束时间不允许与其他时间段交叉",placement:"bottom"}).tooltip("show"),r=!0),b>=v&&u>=C&&(c.eq(g).find("input:text.time").eq(0).tooltip({title:"开始时间不允许与其他时间段交叉",placement:"bottom"}).tooltip("show"),r=!0)}m.push(v),m.push(u),h.push(m)}if(r)return hideTips(),!1}return hideTips(),!0}function GetTimeInt(e){var t=e.split(":"),i=parseInt(t[0]),n=parseInt(t[1]);return 60*i+n}function ReturnTimeInt(e){var t=parseInt(e/60),i=e%60;return(10>t?"0":"")+t+":"+(10>i?"0":"")+i}function checkTime(e){var t=/^((1|0?)[0-9]|2[0-3]):([0-5]?[0-9])$/;return t.test(e)?!0:!1}var listHover=!1,childHover=!1,secondListHover=!1,secondChildHover=!1,checkAllStatus="unchecked",checkListStatus="unchecked",startDate="",endDate="";$(function(){function e(e,t){var i=e.split(" "),i=i[t];return i}function t(){u.is(":checked")&&u.uCheck("uncheck"),v.removeClass("hover"),f.is(":checked")||f.uCheck("check")}function i(e,t){var i="";if("start-date"==e.attr("id")){var n=e.parent().siblings().find("#end-date");startDate=e.data("date"),""==endDate||endDate.valueOf()<startDate.valueOf()?(i=startDate+" 至 "+startDate,n.datetimepicker("update",startDate)):i=startDate+" 至 "+endDate,t&&t(i),n.datetimepicker("setStartDate",startDate)}else endDate=e.data("date"),i=""==startDate?endDate+" 至 "+endDate:startDate+" 至 "+endDate,t&&t(i)}function n(e,t,i,n){var o=e.children(".am-icon-close");listHover=!0,e.children("span").length>0&&e.closest(".list").length?e.children("span").hasClass("hover")||e.children("span").addClass("hover"):e.hasClass("hover")||e.addClass("hover"),t.hasClass("in")||t.addClass("in"),e.closest(".popover").hasClass("secondary")||t.siblings(".popover").hasClass("in")&&t.siblings(".popover").removeClass("in"),n.hasClass("hover")&&n.removeClass("hover"),o.length>0&&o.removeClass("hidden"),d(e,t,i),t.on("mouseenter",function(){$(this).hasClass("second-child")&&(secondChildHover=!0,secondListHover=!0),$(this).hasClass("secondary")&&(secondListHover=!0),listHover=!0,childHover=!0}).on("mouseleave",function(){$(this).hasClass("second-child")&&(secondChildHover=!1,secondListHover=!1),$(this).hasClass("secondary")&&(secondListHover=!1),listHover=!1,childHover=!1,s(e,t)}),$(document).on("mouseover",".nicescroll-rails",function(){listHover=!0,childHover=!0,secondListHover=!0,secondChildHover=!0}).on("mouseout",".nicescroll-rails",function(){listHover=!1,childHover=!1,secondListHover=!1,secondChildHover=!1,s(e,t)})}function s(e,t){var i=e.children("span").length>0&&e.closest(".list").length?e.children("span"):e,n=e.children(".am-icon-close"),s=e.children(".am-icon-pencil-square-o");setTimeout(function(){listHover||(t.removeClass("in second").css("height","auto"),t.siblings(".second-child.in").removeClass("second in"),t.hasClass("secondary")&&t.children("li").removeClass("hover"),i.removeClass("hover"),n.length>0&&n.addClass("hidden"),s.length>0&&s.addClass("hidden")),t.hasClass("second-child")&&(secondListHover||(t.siblings(".secondary.in").removeClass("in"),t.hasClass("addkey")&&$("#main-content > aside >.list-children > .custom").find(".am-icon-pencil-square-o, .am-icon-trash-o").addClass("hidden"),$("#main-content > aside .list li > span.hover").removeClass("hover"),p.is(":visible")&&p.children(".group.hover").removeClass("hover").children(".am-icon-close").addClass("hidden")))},0)}function o(e,t){var i=t.children(".am-icon-close");childHover||(e.removeClass("in").css("height","auto"),t.removeClass("hover"),i.length>0&&i.addClass("hidden"))}function a(){p.hasClass("hidden")&&0==$("#main-content > article .date-time-picker:visible").length&&p.add(g).removeClass("hidden")}function l(t,i,s,a,l){i.is(":visible")&&0==i.closest(".proeffect").length&&i.addClass("hidden"),s.length?"所有"==l?s.text(l):"rate"==t?""==s.text()?s.text(l):s.append(", "+l):s.text(l):(p.append('<div class="group '+t+'"><div class="am-icon-close hidden"></div><div class="title">'+a+'</div><div class="term"></div></div>'),s=p.children("."+t).children(".term"),s.append(l)),p.children(".group").each(function(){var t=$(this),i=t.siblings(".group"),s=0==t.index()?1:0,a=e(t.attr("class"),1),l=h.find("> ."+a);t.hoverDelay({hoverDuring:0,outDuring:0,hoverEvent:function(){n(t,l,s,i)},outEvent:function(){o(l,t)}})})}function c(e,t){p.children("."+e).remove(),t.removeClass("hidden"),""==p.html()&&p.add(g).addClass("hidden")}function d(e,t,i){var n=$(window).height(),s=e.offset().top,o=n-e.offset().top;t.outerHeight()>=o?(s>=.5*n-40?t.outerHeight()>=s?t.css({top:2-i+"px",height:s+"px"}):t.css({top:s-40-t.outerHeight()+42-i+"px",height:"auto"}):t.css({top:s-40-i+"px",height:o-40+"px"}),initScroll(t)):t.css("top",s-40-i+"px")}if(layout(),leftRowHeight(),leftListChild(),scroll(),selection(),$("header").on("click",".switch, .title",function(){var e=$(window),t=e.width(),i=$("#main-content aside"),n=$("#main-content article"),s=i.children(".scroll"),o=i.children("footer"),a=$("#main-content > header .count"),l=$("#main-content > header .title"),c=i.data("isdh");if(c)return!1;if(i.data("isdh",!0),42==i.outerWidth())i.add(a).removeClass("open"),i.animate({width:"216px"},"fast",function(){s.height(i.height()-o.height()).getNiceScroll().resize()}),n.animate({left:"216px",width:t-216+"px"},"fast",function(){i.data("isdh",!1),scroll()}),l.is(":hidden")&&l.removeClass("hidden");else{i.add(a).addClass("open");$("aside footer").height();i.animate({width:"42px"},"fast",function(){s.height(i.height()-o.height()).getNiceScroll().resize()}),n.animate({left:"42px",width:t-42+"px"},"fast",function(){i.data("isdh",!1),scroll()}),a.is(":visible")&&l.addClass("hidden")}}),$("#main-content > aside .list").length>0){var r=$("#main-content > aside .addkey").add($("#main-content > aside .list > li")),h=$("#main-content > aside > .list-children"),m=h.children(".popover"),p=$("#main-content > aside .selected"),v=h.find("> .data-stage > li").not(".date-time-picker"),u=v.find('input[type="checkbox"]'),f=h.find("> .data-stage > li.date-time-picker").find('input[type="checkbox"]'),g=p.next(".clear");if($("#main-content > aside").on("mouseenter mouseleave",".list > li, >.list-children > .custom li",function(e){var t=$(this),i=(t.index()-1,t.siblings().children("span:first-child")),n=t.children("span:first-child"),s=h.find("> .addkey");"mouseenter"==e.type?(t.find(".am-icon-pencil-square-o, .am-icon-trash-o").removeClass("hidden"),t.closest(".list-children").length&&i.hasClass("hover")&&(i.removeClass("hover"),i.siblings("span").addClass("hidden"),s.removeClass("in second"))):setTimeout(function(){secondChildHover||(t.find(".am-icon-pencil-square-o, .am-icon-trash-o").addClass("hidden"),t.closest(".list-children").length&&(s.hasClass("in")&&s.removeClass("in second"),n.removeClass("hover")))},50)}),$("#main-content > aside >.list-children > .custom").on("click","li .am-icon-pencil-square-o",function(e){var t=$(this),i=t.parent().children("span:first-child"),s=t.index(),o=t.parent().siblings().children("span:first-child"),a=h.find("> .addkey"),l=t.parent("li").text();l=l.indexOf("(")>0?l.substring(0,l.indexOf("(")):l,a.addClass("second"),n(i,a,s,o),a.find('input[type="text"]').val(l),e.stopPropagation()}),$("#main-content > aside").on("click",".myself .am-icon-pencil-square-o",function(e){var t=$(this).index(),i=h.find("> .myself"),s=$(this).siblings("div"),o=$(this).parent().text();n($(this).parent(),i,t,s),i.find('input[type="text"]').val(o),e.stopPropagation()}).on("mouseenter mouseleave",".myself",function(e){var t=$(this),i=t.siblings(".addkey"),n=h.find("> .addkey"),s=$(this).children(".am-icon-pencil-square-o");"mouseenter"==e.type?(listHover=!0,s.removeClass("hidden"),i.hasClass("hover")&&(i.removeClass("hover"),n.removeClass("in"))):setTimeout(function(){childHover||(s.addClass("hidden"),t.removeClass("hover"),h.find("> .myself").removeClass("in"))},50)}),$("#main-content > aside > .list-children > .custom").on("click","> li .am-icon-trash-o",function(e){var t=$(this).closest("ul"),i=(t.children("li"),$(this).closest(".custom").siblings(".addkey")),n=p.find(".custom > .term");n.length>0&&n.text()==$(this).parent("li").text()&&c("custom",$("#main-content > aside .list > .custom")),i.hasClass("in")&&i.removeClass("in"),e.stopPropagation()}),$("#main-content > aside .list").on("click","> li .am-icon-trash-o",function(){$(this).closest("li").remove()}),r.each(function(){var e=$(this),t=e.children("span").length>0?e.children("span"):e,i=e.hasClass("addkey")?0:e.index()+1,s=e.attr("class"),a=e.siblings("li").children("span"),l=h.find("> ."+s);e.hoverDelay({hoverDuring:0,outDuring:0,hoverEvent:function(){n(e,l,i,a)},outEvent:function(){o(l,t)}})}),h.on("click","> .addkey .confirm",function(){var e=$("#main-content > aside > .wrapper > .section .hover"),t=$("#main-content > aside > .list-children > .custom"),i=t.length?t:$("#main-content > aside .list"),n=($("#main-content > aside > .list-children > .custom span.hover"),$(this).parent("li").siblings().children("input")),s=h.children(".addkey"),o=p.find(".custom > .term"),a=n.val();""!==a&&(e.length&&e.hasClass("addkey")?s.removeClass("in"):o.length>0&&o.text(i.children("li.hover").text()),n.val(""))}).on("click","> .myself .confirm",function(){var e=$("#main-content > aside .myself > .text"),t=$(this).parent("li").siblings().children("input"),i=t.val();""!==i&&(e.text(i),$(this).closest(".popover").removeClass("in"))}),h.on("click","> .popover .cancel",function(){$(this).parent("li").siblings().children("input").val(""),$(this).closest(".popover").removeClass("in")}),$("#main-content > aside > .list-children > .popover").not(".second-child, custom").on("click",'> li > .am-checkbox > input[type="checkbox"]',function(t){var i=$(this),n=i.closest(".popover"),s=n.attr("class"),s=e(s,2),o=$("#main-content > aside .list > li."+s),d=p.children("."+s).children(".term"),r=o.text(),h=i.parent("li").hasClass("date-time-picker")?"自定义时间段":i.parent().text();if(a(),i.is(":checked"))"rate"!==s&&(i.closest("li").hasClass("all")?i.closest("li").siblings("li").find(".am-checkbox").children().uCheck("check"):i.closest("li").siblings("li").find(".am-checkbox").children().uCheck("uncheck")),l(s,o,d,r,h);else{var m=n.find(".am-checkbox").children('input[type="checkbox"]:checked');if("rate"!=s)if(i.closest("li").hasClass("all"))i.closest("li").siblings("li").find(".am-checkbox").children().uCheck("uncheck"),d.text("");else{var v=i.closest("li").siblings("li.all").find("> .am-checkbox").children(),m=n.find(".am-checkbox").children('input[type="checkbox"]:checked'),u="";v.is(":checked")&&(v.uCheck("uncheck"),m=n.find(".am-checkbox").children('input[type="checkbox"]:checked')),m.length>0?(m.each(function(){u+=$(this).closest("li").text()+", "}),u=u.substring(0,u.lastIndexOf(", ")),d.text(u)):d.text("")}else{var u="";m.each(function(){u+=$(this).closest("li").text()+", "}),u=u.substring(0,u.lastIndexOf(", ")),d.text(u)}""==d.text()&&c(s,o)}t.stopPropagation()}),$("#main-content > aside > .list-children > .secondary").on("mouseenter","> li",function(){var t=$(this),i=e(t.attr("class"),0),s=t.index()-2,o=t.siblings(),a=h.find("> ."+i);a.length?(a.addClass("second"),n(t,a,s,o),a.siblings(".second-child.in").removeClass("in")):h.find(".second-child.in").removeClass("in"),t.siblings().removeClass("hover")}),$("#main-content > aside > .list-children > .popover.custom").on("click","> li",function(){var t=$(this),i=t.closest(".popover"),n=i.attr("class"),n=e(n,2),s=$("#main-content > aside .list > li."+n),o=p.children("."+n).children(".term"),d=s.text(),r=t.text();a(),t.hasClass("hover")?(t.removeClass("hover"),c(n,s)):(t.addClass("hover"),t.siblings().removeClass("hover"),l(n,s,o,d,r),t.children(".am-icon-trash-o").click(function(){t.hasClass("hover")&&c(n,s)}))}),g.on("click",function(){var e=m.find(".am-checkbox").children();p.empty(),m.children("li.active").length>0&&m.children("li.active").removeClass("active"),e.is(":checked")&&e.uCheck("uncheck"),r.hasClass("hidden")&&r.removeClass("hidden"),p.add(g).addClass("hidden"),startDate=endDate=""}),p.on("click",".group > .am-icon-close",function(){var t=e($(this).parent().attr("class"),1),i=h.children("."+t),n=i.find('.am-checkbox > input[type="checkbox"]'),s=p.siblings(".list").children("."+t);$(this).parent(".group").remove(),s.removeClass("hidden"),i.removeClass("in"),n.is(":checked")&&(n.uCheck("uncheck"),n.parents("li").removeClass("active")),""==p.html()&&p.add(g).addClass("hidden"),startDate=endDate="",SerachKeyWord()}),$("#start-date").datetimepicker({format:"yyyy-mm-dd",minView:"month"}),$("#end-date").datetimepicker({format:"yyyy-mm-dd",minView:"month"}),$("#main-content > aside > .list-children > .date-time-picker").on("changeDate","#start-date, #end-date",function(){var e=$(this),n="data-stage",s=$("#main-content > aside .list > .data-stage"),o=$("#main-content > aside .selected > .data-stage > .term"),c=s.text(),d=function(e){a(),l(n,s,o,c,e),t()};i(e,d)}),$("#main-content > article > .proeffect").on("mouseenter",".selection .options li",function(t){var i=$(this),s=i.closest(".selection"),o=(s.find("#start-date"),s.find("#end-date"),s.find(".selected"),i.closest(".headinfo").find(".popover."+e(i.attr("class"),0))),a=i.index()+9,l=i.siblings();o.length?n(i,o,a,l):(i.closest(".headinfo").find(".popover.in").removeClass("in"),i.siblings().removeClass("hover"))}).on("mouseover mouseout",".selection .options",function(e){var t=$(this);"mouseover"==e.type?secondListHover=!0:(secondListHover=!1,setTimeout(function(){secondListHover||t.add(t.siblings(".popover")).removeClass("in")},100))}).on("changeDate","#start-date, #end-date",function(){var e=$(this);i(e,function(t){e.closest(".popover").siblings(".selected").text(t),e.closest(".headinfo").siblings(".chartinfo").children(".lateexplodetitle").text(t+"曝光量")})}).on("click",function(e){var t=$(e.target),i=t.closest(".options");i.length&&i.closest(".headinfo").siblings(".chartinfo").children(".lateexplodetitle").text(t.text()+"曝光量")}),$("#timepicker").length){var b,C,x="",k=0,y=0;for(k;24>k;k++)for(b=10>k?"0"+k:k,y;2>y;y++)if(C=0==y?"00":"30",x+="<span>"+b+":"+C+"</span>",1==y){y=0;break}$("#timepicker .popover-content").append(x)}$("#main-content > .modal .select-time").on("click",".select > .am-icon-caret-down",function(){var e=$(this),t=e.parent("td"),i=$("#timepicker").children(".popover"),n=i.children(".scroll"),s=t.position().top,o=t.position().left;t.addClass("active"),t.siblings().add(t.parent("tr").siblings().find("td.active")).add(t.closest("div").siblings("div").find("td.active")).removeClass("active"),i.hasClass("in")?(i.removeClass("in"),n.addClass("hidden")):(i.addClass("in").css({top:s+26+"px",left:o+8+"px",width:t.width()+"px"}),setTimeout(function(){n.removeClass("hidden").scrollTop(0),initScroll(n)},20))}).on("click","#timepicker .popover-content > span",function(){var e=$(this),t=e.closest("#timepicker").siblings(".tbody").add(e.closest("#timepicker").siblings(".set-time")).find("td.active"),i=e.text();t.children(".time").val(i),e.closest(".popover").removeClass("in"),e.parent().addClass("hidden");var n=t.parent();CompareTime(n,n.find("td").index(t))}).on("click",".am-icon-plus",function(){var e=$(this),t=e.parent().siblings(".begin-time").children(".time"),i=e.parent().siblings(".end-time").children(".time"),n=(e.closest("tbody").children("tr").length>1?"top":"bottom",'<tr>  <td><label class="am-checkbox"><input type="checkbox" value="" data-am-ucheck></label></td>  <td class="select"><input type="text" class="time tooltips" value="'+t.val()+'"  placeholder="请选择" /><span class="am-icon-caret-down"></span></td>  <td class="select"><input type="text" class="time tooltips" value="'+i.val()+'"   placeholder="请选择"/><span class="am-icon-caret-down"></span></td>  <td><span class="am-icon-trash-o"></span></td></tr>');if(CompareTimeAll(e.parent().parent())){var s=$("#main-content > .modal .select-time .tbody tbody");s.prepend(n).find('input[type="checkbox"]').uCheck(),initScroll(s),e.parent().siblings().find(".time").val("")}}).on("click",function(e){var t=$(this).find(".popover");$(e.target).closest(".active").length||(t.removeClass("in"),t.children(".scroll").addClass("hidden"))}).on("click",".am-icon-trash-o",function(){$(this).closest("tr").remove()})}if($(".hover").length>0){var w=$(".hover");w.each(function(){var e=$(this);hover(e)})}$("#main-content > article .peerkey th > label").each(function(){var e=$(this),t=$("#main-content > article .peerkey th").width(),i=e.closest("div").find(".popover");e.add(i).hoverDelay({hoverDuring:10,outDuring:200,hoverEvent:function(){listHover=!0,i.hasClass("in")||(i.css("left",e.parent("th").index()*t+18+"px"),i.addClass("in"))},outEvent:function(){listHover=!1,listHover||i.removeClass("in")}})}),$("#main-content > article .check-all input[type='checkbox']").length>0&&(checkAll(),$(".tbody .am-checkbox").on("click","input[type='checkbox']",function(){$(this).is(":checked")?showHeader():$(this).closest("tr").siblings().find('input[type="checkbox"]').is(":checked")||hideHeader()})),$("#main-content > article .slide-on").click(function(){var e=$("#frame").contents().find("#main-content > article > footer .btn-group"),t=$("#frame").contents().find("#main-content > header > .count");$("#frame-page").offCanvas("open"),e.removeClass("hidden"),t.addClass("hidden"),e.children(".cancel").click(function(){$("#frame-page").offCanvas("close")})}),$(document).on("click",".open-modal",function(){var t=e($(this).attr("class"),0),i=$(".modal.popwindow"),n=i.children(".modal-dialog"),s=n.children("."+t),o=s.find(".scroll");"modify-group"==t&&n.removeClass("bidding"),"batch-bidding"==t&&(n.hasClass("bidding")||n.addClass("bidding")),s.removeClass("hidden"),i.modal().on("hidden.bs.modal",function(){s.addClass("hidden"),o.length&&o.removeClass("in")}),o.length&&setTimeout(function(){o.addClass("in")},300),modalMiddle()}).on("click",".modal input.adjustprice, .modal input.modifyprice",function(){var e=$(this),t=e.closest("li").siblings(".custom-price").children(".price"),i=e.closest("li").siblings(".modify-price").children(".price");e.is(":checked")&&(e.hasClass("adjustprice")?(t.removeAttr("disabled"),i.attr("disabled","disabled")):(t.attr("disabled","disabled"),i.removeAttr("disabled")))}).on("click",".modal .add-group > .plus",function(){$(this).siblings(".add-editor").toggleClass("in")}).on("click",".modal .add-group .add-confirm",function(){var e=$(this).closest(".add-editor"),t=$(this).siblings(".form-control"),i=$(this).closest(".add-group").siblings(".scroll").find(".table > tbody"),n=i.find("td");""==!t.val()&&(n.length%3?i.children("tr:last-child").append('<td><label class="am-checkbox"><input type="checkbox" data-am-ucheck></label><span>'+t.val()+"</span></td>"):i.append('<tr><td><label class="am-checkbox"><input type="checkbox" data-am-ucheck></label><span>'+t.val()+"</span></td></tr>"),i.find('input[type="checkbox"]').uCheck(),t.val(""),e.removeClass("in"))}).on("click",".modal .add-group .add-cancel",function(){$(this).closest(".add-editor").removeClass("in")}),$("#main-content > article .tbody .bidding").each(function(){var e=$(this),t=e.children(".am-icon-pencil");e.hoverDelay({hoverDuring:100,outDuring:100,hoverEvent:function(){t.removeClass("hidden")},outEvent:function(){t.addClass("hidden")}})}),$("#main-content > article .tbody").on("click",".bidding",function(){var e=$(this),t=e.text(),i=$("#main-content > article > .modal.popwindow"),n=i.children(".modal-dialog"),s=e.closest("td").siblings().eq(3).text();n.hasClass("bidding")||n.addClass("bidding"),i.find(".modify-bidding").removeClass("hidden"),i.modal().on("hidden.bs.modal",function(){i.find(".modify-bidding").addClass("hidden")}),modalMiddle(),i.find(".keywords > span:last-child").text(s),i.find(".price").val(t)}),$(".modal").length>0&&$(".modal").on("shown.bs.modal",function(){modalMiddle()}),$("#lateexplodenum").highcharts({title:{text:""},xAxis:{title:{text:""},categories:["2015-10-18","2015-10-19","2015-10-20","2015-10-21","2015-10-22","2015-10-23","2015-10-24"]},yAxis:{title:{text:""}},plotOptions:{pointStart:"2015-10-19"},legend:{enabled:0},series:[{data:[2,2.9,1.5,4.5,3.2,5.5,3.4],min:"2"}]}),$("#explodenum").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[2,2.9,1.5,4.5,6.2]}]}),$("#clicknum").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[4,3.1,1.3,4.5,6.2]}]}),$("#fee").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[4,1.9,2.5,4.5,6.2]}]}),$("#avgfee").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[2,4.9,1.5,3.5,6.2]}]}),$("#match").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[1,2.9,1.5,4.3,6.4]}]}),$("#avgmatch").highcharts({title:{text:""},xAxis:{categories:["1","2","3","4","5"]},yAxis:{title:{text:""}},series:[{data:[2.5,1.9,3.5,1.4,5.2]}]})}),$(window).resize(function(){layout(),modalMiddle()}),$.fn.hoverDelay=function(e){var t,i,n={hoverDuring:200,outDuring:200,hoverEvent:function(){$.noop()},outEvent:function(){$.noop()}},s=$.extend(n,e||{});return $(this).each(function(){$(this).hover(function(){clearTimeout(i),t=setTimeout(s.hoverEvent,s.hoverDuring)},function(){clearTimeout(t),i=setTimeout(s.outEvent,s.outDuring)})})},Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};